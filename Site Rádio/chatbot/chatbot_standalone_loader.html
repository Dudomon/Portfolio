<!-- ============================================ -->
<!-- CHATBOT CHATINHO - LOADER STANDALONE        -->
<!-- ============================================ -->
<!--
  INSTRU√á√ïES:

  Copie ESTE C√ìDIGO COMPLETO e cole no WordPress em:
  Apar√™ncia ‚Üí Personalizar ‚Üí HTML Adicional ‚Üí Footer

  OU

  Apar√™ncia ‚Üí Editor de Temas ‚Üí footer.php
  (cole ANTES do </body>)
-->

<!-- CSS -->
<link rel="stylesheet" href="/chatbot/chatbot.css?v=1.0.5">

<!-- JavaScript -->
<script src="/chatbot/chatbot.js?v=1.0.5"></script>

<!-- Inicializa√ß√£o -->
<script>
(function() {
    console.log('ü§ñ CHATBOT STANDALONE: Iniciando...');

    let attempts = 0;
    const maxAttempts = 10;

    function tryInit() {
        attempts++;
        console.log(`üîÑ Tentativa ${attempts}/${maxAttempts}`);

        if (typeof RadioChatbot === 'undefined') {
            console.warn('‚ö†Ô∏è RadioChatbot ainda n√£o carregou');
            if (attempts < maxAttempts) {
                setTimeout(tryInit, 1000);
            } else {
                console.error('‚ùå FALHA: chatbot.js n√£o carregou ap√≥s 10 tentativas');
            }
            return;
        }

        console.log('‚úÖ RadioChatbot encontrado!');

        try {
            window.chatbotInstance = new RadioChatbot({
                apiUrl: '/chatbot/chat_api.php',
                botName: 'Chatinho',
                position: 'bottom-right',
                debug: true
            });
            console.log('‚úÖ Chatbot inicializado com sucesso!');

            // For√ßa estilos ap√≥s inicializar
            setTimeout(() => {
                const toggle = document.getElementById('chatbot-toggle');
                const chatbot = document.getElementById('radio-chatbot');

                if (toggle && chatbot) {
                    toggle.style.setProperty('z-index', '999999', 'important');
                    toggle.style.setProperty('pointer-events', 'auto', 'important');
                    toggle.style.setProperty('cursor', 'pointer', 'important');
                    chatbot.style.setProperty('z-index', '999999', 'important');
                    console.log('‚úÖ Estilos for√ßados aplicados');
                }
            }, 500);

        } catch (error) {
            console.error('‚ùå Erro ao inicializar chatbot:', error);
        }
    }

    // Tenta em m√∫ltiplos momentos
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', tryInit);
    } else {
        tryInit();
    }

    window.addEventListener('load', tryInit);

    if (typeof jQuery !== 'undefined') {
        jQuery(document).ready(tryInit);
    }

    setTimeout(tryInit, 2000);
})();
</script>

<!-- Estilos for√ßados inline -->
<style>
#chatbot-toggle {
    z-index: 999999 !important;
    pointer-events: auto !important;
    cursor: pointer !important;
}
#radio-chatbot {
    z-index: 999999 !important;
}
.chatbot-backdrop {
    z-index: 999998 !important;
}
</style>
